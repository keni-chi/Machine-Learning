# time series

時系列モデルの種類
    Moving Window (MW) モデル
        新しいサンプルの測定時刻と最も古いサンプルの測定時刻との間の幅 (窓、window) を移動 (moving) しながら、モデルの再構築を繰り返す。
        新しく y の値が測定されたら回帰モデルが再構築される。
    Just-In-Time (JIT) モデル
        y の値を推定するごとに回帰モデルが再構築される。
        トレーニングデータの数は事前に決める必要がある。
    時間差分 (Time Difference, TD) モデル
        これまで回帰モデルは、X の値と y の値との間で構築された。時間差分 (Time Difference, TD) モデルでは、X の時間差分の値と y の時間差分の値との間で回帰モデルが構築される。
        TD モデルでは回帰モデルは再構築されない。更新されるのは、推定された y の時間差分の値に足し合わされる、直近の y の実測値。
        ただ、TD モデルにおいては、基本的に回帰分析手法は線形手法に限られる。

時系列データ
    自己相関
        時系列上にある異なる点同士の相関のこと
        自己相関を用いることで、データの前後の関係を表現
        自己相関はコレログラムというグラフで表すことができる
    偏自己相関
        自己相関が時系列データのn次遅れのデータそれぞれに行うに対して、偏自己相関は自己相関係数から、時間によって受ける影響を除去した自己相関となる
    周期性(seasonal)
        １２ヶ月周期で似た変化をしたり、曜日によって周期的な変化をしたりすること。
    トレンド
        全体の傾向。なんとなく上昇傾向がある、など。
    外因性
        上記はデータの中での特徴だが、外因性は自己相関だけでは説明できないデータの動きのこと。
    ホワイトノイズ
        これまで述べたデータの特徴以外で説明不可能なノイズをホワイトノイズ。残差(Residuals)など。
            残差
                推定した回帰式と実際のデータの値との差

定常/非定常
    定常過程
        定常性
            時間によらず期待値、自己共分散（自分自身の時間をずらしたバージョンとの共分散）が一定であるような時系列データの性質
        ARモデル（自己回帰モデル）
            時間の変化に対し規則的に値が変化する、最も単純な時系列モデル
        MAモデル（移動平均モデル）
            時間の変化に対し不規則に値が変化します。 ただし、ある区間での変動が一定である
        ARMAモデル（自己回帰移動平均モデル）
            ARモデルとMAモデルの組み合わせ
    非定常過程
        ARIMAモデル（自己回帰和分移動平均モデル）
            ARMAモデルに加えて、前後のデータ間の差分dを定義（d：トレンド要素）
        単位根過程
            ARIMA過程のうち、特に元の時系列が非定常過程である一方で差分系列が定常過程である
            利用
                時系列データの回帰分析を行う時、単位根過程について考える必要があります。
                「見せかけの回帰」
                    単位根過程に従う𝑥𝑡,𝑦𝑡 を回帰分析を行うと、まったく関係のない𝑥𝑡,𝑦𝑡の間に有意な相関を見出してしまうこと
                「見せかけの回帰」を避けるためには、あらかじめ２つの時系列データ𝑥𝑡,𝑦𝑡が単位根過程に従っているかどうか確認
                    例：株価と二酸化炭素濃度
                        ⇨単位根検定
        SARIMAモデル（季節自己回帰和分移動平均モデル）
            ARIMAモデルにさらに長期的な季節変動を取り入れたモデル

ARCHモデル
    正式名称は自己回帰条件付き分散不均一モデル(Auto Regressive Heteroskedasticity model)
    ARは自己回帰モデルのARと同じ意味
    株価によくある「前回絶対値の大きなノイズが来たのであれば今回の分散は大きくなるだろう」のモデル
    ARCH(q)モデル
        q 期前までの平均からの乖離部分の2乗が条件付きボラティリティに影響
    GARCH(p,q)モデル
        ARCHモデルを一般化
        現在の条件付ボラティリティは、p 期前までの条件付ボラティリティ（変動の程度）と q 期前までの平均からの乖離部分の2乗により決定
    GARCH(p,q)モデルの拡張
        EGARCHモデル
        GJR GARCHモデル
        Heston-Nandi GARCH モデル
    多変数モデルへの拡張
        GARCHモデルはいずれも単一変数の時系列データに対して適用されるものであったが、多変数の時系列データに対してその相関構造を内包しつつ適用可能なGARCHモデルも存在する
VARモデル
    VARモデル
        自己回帰(AR)モデルを多変量に拡張したもの。
        複数の変数を用いることで予測精度の向上が見込まれる。
    グレンジャー因果
        データのみから因果性の判断を行うことができる
        時系列ytの予測において、時系列xtを用いると予測精度が向上した場合、xtからytへの因果性があるという考え方
        短所としては、まずグレンジャー因果性は通常の因果性とは異なる。また、因果の方向が実際と真逆になることもある。
    インパルス応答関数
        ある変数時系列の変化がその変数時系列やその他の変数時系列に与える影響を分析することができる

自己共分散
    統計学における確率過程での、自分自身の時間をずらしたバージョンとの共分散
ランダムウォーク
    次に現れる位置が確率的に無作為（ランダム）に決定される運動
Box-Jenkins 法
    概要
        1. まず非定常過程の時系列データから，トレンドやら季節変動などを「余計なもの」として除去して定常過程に直す 
            自己相関係数や自己偏相関係係数をみて自己回帰の次数決定やデータの水平化を行いモデルを特定
        2. 定常過程に直したものに対して，ARやMAモデルを組み合わせたARMA（自己回帰移動平均モデル）で分析する 
            特定したモデルのパラメータを平均平方誤差が最小になるよう推定し、誤差を検討して妥当性を診断
    メリット
        古典的だが手続きが確立した手法（柔軟性はない）
    デメリット
        欠損値があるとダメ。
        目的変数は連続量
        短期的な予測のみ有効？
差分系列（階差系列）
    1時点離れたデータとの差をとったデータのこと
        Δ𝑦𝑡=𝑦𝑡−𝑦𝑡−1
和分過程
    単位根過程とよく似ている
    和分過程は一階の差分だけでなくｄ階差分について考えることができる
対数差分系列
    対数系列に対して差分系列をとったもの
    https://dev.classmethod.jp/statistics/basis-of-ts-data-analysis-reading-memo/
反転可能性
    MA(q)過程が反転可能(invertible)とは、そのMA(q)過程をAR(∞)過程に書きなおせることです。
    MA特性方程式の全ての解の絶対値が1より大きければMA過程は反転可能になる。
ARIMAX
    ARIMAモデルは基本的には１変量による自己回帰。
    時系列データにはない外部要因を入れて評価したい場合にARIMAXを用いる。
        例：曜日とか天気とか気温とかそういう効果を取り入れたいときに、使用するモデル。
    メリット
        安定的かつ周期性のあるデータには有用
    デメリット
        データから潜在的なプロセス（データの要因）は分解不可能
        正規分布でなく非線形でもない





# 参考
[データ解析に関するいろいろな手法・考え方・注意点のまとめ](https://datachemeng.com/summarydataanalysis/)  
[Pythonのstatsmodelsで時系列分析をする](https://qiita.com/hcpmiyuki/items/b1783956dee20c6d4700#%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E3%83%87%E3%83%BC%E3%82%BF)  
[未来を予測するビッグデータの解析手法と「SARIMAモデル」](https://deepage.net/bigdata/2016/10/22/bigdata-analytics.html)  
[ARCHモデル](https://ja.wikipedia.org/wiki/ARCH%E3%83%A2%E3%83%87%E3%83%AB)  
[VARモデルによる計量時系列分析の基本と因果推定 with R](https://qiita.com/saltcooky/items/2d0119ea4a10bab6cff2)  
[MA過程の反転可能性](https://analytics-note.xyz/time-series/ma-invertible/)  
[時系列データの予測ライブラリ--PyFlux--](https://qiita.com/GushiSnow/items/437dde3293f6d77bfa58#%E3%83%A2%E3%83%87%E3%83%AB%E3%81%AE%E5%AE%9A%E7%BE%A9)  
